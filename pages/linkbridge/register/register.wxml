<view class="container">
  <t-navbar title="注册" left-arrow bind:go-back="onGoBack" />

  <view class="form-container">
    <view class="form-section">
      <t-input
        label="用户名"
        placeholder="4-20位字母数字下划线"
        value="{{username}}"
        bind:change="onUsernameChange"
        clearable
        tips="{{usernameTip}}"
      />
      <t-input
        label="显示名称"
        placeholder="1-20个字符"
        value="{{displayName}}"
        bind:change="onDisplayNameChange"
        clearable
      />
      <t-input
        label="密码"
        placeholder="8-32位，含大小写和数字"
        type="{{showPassword ? 'text' : 'password'}}"
        value="{{password}}"
        bind:change="onPasswordChange"
        clearable
        suffixIcon="{{showPassword ? 'browse' : 'browse-off'}}"
        bind:click="onTogglePassword"
      />
      <t-input
        label="确认密码"
        placeholder="再次输入密码"
        type="{{showConfirmPassword ? 'text' : 'password'}}"
        value="{{confirmPassword}}"
        bind:change="onConfirmPasswordChange"
        clearable
        suffixIcon="{{showConfirmPassword ? 'browse' : 'browse-off'}}"
        bind:click="onToggleConfirmPassword"
      />
    </view>

    <view class="password-strength" wx:if="{{password}}">
      <text class="strength-label">密码强度：</text>
      <text class="strength-value strength-{{passwordStrength}}">{{passwordStrengthText}}</text>
    </view>

    <view class="error-message" wx:if="{{errorMessage}}">
      {{errorMessage}}
    </view>

    <view class="button-section">
      <t-button
        theme="primary"
        block
        loading="{{loading}}"
        disabled="{{!canSubmit}}"
        bind:tap="onTapRegister"
      >
        注册
      </t-button>
    </view>

    <view class="link-section">
      <text class="link-text" bind:tap="onTapLogin">已有账号？去登录</text>
    </view>
  </view>
</view>
