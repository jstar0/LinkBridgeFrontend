<t-navbar left-arrow />
<view class="page login">
  <view class="login__title"> 欢迎使用 LinkBridge </view>
  <view class="login__content">
    <view class="login__input">
      <t-input label="用户名" placeholder="请输入用户名" value="{{username}}" bind:change="onUsernameChange" clearable />
      <t-input
        wx:if="{{mode === 'register'}}"
        label="显示名称"
        placeholder="请输入显示名称"
        value="{{displayName}}"
        bind:change="onDisplayNameChange"
        clearable
      />
      <t-input
        label="密码"
        placeholder="请输入密码"
        type="password"
        clearable
        value="{{password}}"
        bind:change="onPasswordChange"
      />
    </view>

    <view class="login__tips">仅支持通过二维码建立临时会话；不提供用户搜索或长期关系</view>

    <view class="login__error" wx:if="{{errorMessage}}">{{errorMessage}}</view>

    <view class="login__button">
      <t-button theme="primary" size="large" block loading="{{loading}}" disabled="{{!canSubmit}}" bind:tap="onSubmit">
        {{ mode === 'login' ? '登录' : '注册并登录' }}
      </t-button>
    </view>

    <view class="login__password--forget">
      <text wx:if="{{mode === 'login'}}" bindtap="toggleMode">没有账号？</text>
      <text wx:else bindtap="toggleMode">已有账号？</text>
      <t-link theme="primary" size="small" bind:tap="toggleMode">{{mode === 'login' ? '去注册' : '去登录'}}</t-link>
    </view>
  </view>
</view>
