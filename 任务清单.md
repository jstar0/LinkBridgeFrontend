# 任务清单

本文件用于对照 `E:\Project\LinkBridge\需求.txt`，记录“未实现项 / 进行中项 / 已完成项”，并作为 A（Local Feed / 本地信息流闭环）的执行入口。

> 约定：所有新增后端依赖只通过 `LinkBridgeFrontend/utils/linkbridge/api.js` 新增函数表达，并在函数顶部写清 Method/Path/Schema/Error codes。

---

## A：本地信息流（Local Feed）闭环（P0）

### A1 页面结构（4.1）
- [x] TabBar 已有 “本地” 入口（`pages/nearby/index`）
- [x] 本地信息流内有 “地图 / 发布” 两段切换（等价于两子页）
- [x] 不拆页：保留同页内切换（用户确认）

### A2 Home Base Address（4.2）
- [x] 发布页提供 “用当前位置 / 地图选点” 设置入口（对齐后端 home-base）
- [x] 首次进入强引导（未设置时必须引导设置）
- [x] 每日最多修改位置 3 次（0 点重置）：后端错误码联调 + 前端提示
- [x] 接口契约补齐到 `api.js`（GET/PUT home-base）
- [x] 账号级可见范围（radiusM）：在“我的位置”中设置（不在发布表单中设置）

### A3 发布（Post）能力（4.3）
- [x] 前端发布表单：文字/图片 + 置顶 + 有效期（可见范围由“我的位置”决定，账号级）
- [x] 接口契约：创建发布 / 删除发布 / 拉取我的发布（写入 `api.js`）
- [x] 真实接口联调：创建发布 / 删除发布 / 拉取我的发布（对齐后端 main）
- [x] 信息源页按发布者规则裁剪（有效期/可见范围/置顶排序）——后端版本

### A4 地图（Map）能力（4.4）
- [x] 支持拖动/缩放后刷新（region change end -> getCenterLocation）
- [x] 接口契约：按视野加载 pins（bbox/zoom/limit），写入 `api.js`
- [x] 真实数据源联调：按视野加载 pins（对齐后端 main）
- [x] 点位密集策略：聚合/分层/限量渲染（cluster + limit）
- [x] Pin 样式：用户头像点位（来自对方 Home Base Address）
- [x] 点击点位 -> 进入信息源页（目前为本地 mock）

### A5 地图关系请求（3.3）
- [x] 发起请求按钮态（可发起/等待同意/可聊天/冷却中/今日上限）
- [x] 支持验证消息（verification message）
- [x] “请求列表”展示 verification message（会话页 & 本地页）
- [ ] 后端接口实现：`POST /v1/session-requests` 支持 `source=localfeed` + `verificationMessage`
- [ ] 反滥用：每日 10 次 + 拒绝后 3 天冷却（后端错误码联调；前端按码提示）

---

## B：微信码体系增强（P1）
- [ ] 区分用途：Relationship WeChat Code vs Activity WeChat Code
- [ ] 微信码有效期（默认永久）
- [ ] 地理围栏（geo-fence）校验与提示

---

## C：活动系统 Activity（P2）
- [ ] 创建活动（群聊会话）+ 生成活动微信码
- [ ] 扫码加入 + 成员管理
- [ ] 到期归档 + 续期询问（仅 creator）
- [ ] 日历/提醒

---

## D：阅后即焚 + E2EE + 多端同步（P3）
- [ ] 阅后即焚统一计时（首次阅读触发，所有端同步）
- [ ] 新设备不拉历史（选项 A）
- [ ] E2EE（正文/附件）协议与实现
